{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{% block title %}{{ settings_obj.meta_title }}{% endblock %}</title>
<meta name="description" content="{{ settings_obj.meta_title }}">
<meta name="keywords" content="">
<link rel="icon" href="{{ settings_obj.favicon.url }}" type="image/png">
<link rel="apple-touch-icon" href="{{ settings_obj.favicon.url }}">
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/18.2.1/css/intlTelInput.css">
<link rel="stylesheet" href="{% static 'css/style.css' %}">
<style>
  .site-footer {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    color: #cbd5e1;
    font-size: 13px;
    z-index: 50;
  }

  .footer-container {
    max-width: 1200px;
    margin: auto;
    padding: 12px 16px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
  }

  .site-footer a {
    color: #e5e7eb;
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .site-footer a:hover {
    color: #facc15; /* premium gold */
  }

  .footer-center {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .dot {
    opacity: 0.5;
  }

  .footer-right {
    white-space: nowrap;
  }

  .muted {
    opacity: 0.7;
  }

  /* MOBILE RESPONSIVE */
  @media (max-width: 768px) {
    .footer-container {
      flex-direction: column;
      text-align: center;
      gap: 6px;
    }
  }

  .iti--separate-dial-code .iti__selected-dial-code {
    margin-left: 8px;
  }
  .iti {
    width: 100%;
  }
  .iti input,
  .iti input[type=tel] {
    width: 100%;
    height: 44px;              /* üî• fix height */
    padding-left: 90px !important; /* üî• space for flag + code */
    padding-right: 12px;
    font-size: 14px;
    border-radius: 6px;
    border: 1px solid #d1d5db; /* gray-300 */
    outline: none;
  }
  .iti__flag-container {
    left: 8px;
  }
  .iti__selected-flag {
    height: 100%;
    padding: 0 8px;
    display: flex;
    align-items: center;
  }
  .iti__arrow {
    margin-left: 6px;
  }
  .iti input:focus {
    border-color: #fb923c; /* orange-400 */
    box-shadow: 0 0 0 2px rgba(251,146,60,0.3);
  }
  .animate-zoom-in { animation: zoomIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
    @keyframes zoomIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
</style>
</head>
<body>


{% include 'includes/header.html' %}

{% block content %}{% endblock %}



<div id="planRequestModal" class="fixed inset-0 bg-black/60 hidden z-50 flex items-center justify-center">

  <div class="bg-white w-[92%] max-w-md p-6 relative shadow-2xl">

    <button onclick="closePlanRequestModal()" class="absolute top-4 right-4 bg-gray-100 w-8 h-8 flex items-center justify-center">
      <i class="fa-solid fa-xmark"></i>
    </button>

    <div class="mb-6 pb-3 border-b-2 border-orange-400">
      <h3 class="text-lg font-bold text-gray-800">Request Floor Plan</h3>
      <p class="text-sm text-gray-500">For <span id="planTitle" class="font-semibold text-orange-600"></span></p>
    </div>

    <form onsubmit="return submitPlanRequest()" class="space-y-4">

      <input type="text" required placeholder="Full Name" class="w-full border px-3 py-2 text-sm">

      <input type="tel" required placeholder="Mobile Number"
        class="phone-input w-full border px-3 py-2 text-sm">

        <input type="tel" required placeholder="Email"
        class="phone-input w-full border px-3 py-2 text-sm">

      <button type="submit" class="w-full bg-orange-500 text-white py-3">Submit & View Plan</button>

    </form>

  </div>
</div>

<div id="configModal" class="fixed inset-0 bg-black/60 hidden z-50 flex items-center justify-center">
  <div class="bg-white w-[92%] max-w-md p-6 relative shadow-2xl">

    <button type="button" onclick="closeConfigModal()" class="absolute top-4 right-4 bg-gray-100 w-8 h-8 flex items-center justify-center hover:bg-gray-200">
      <i class="fa-solid fa-xmark"></i>
    </button>

    <div class="mb-6 pb-3 border-b-2 border-orange-400">
      <h3 class="text-lg font-bold text-gray-800">Get Configuration Details</h3>
      <p class="text-sm text-gray-500">For <span id="selectedBHK" class="text-orange-600 font-semibold">--</span></p>
    </div>

    <form method="post" action="{% url 'response:configuration' %}" class="space-y-4">
      {% csrf_token %}

      <input type="hidden" name="configuration" id="modalConfigInput">

      <input type="text" name="name" required placeholder="Full Name" class="w-full border px-3 py-2 text-sm">
      <input type="email" name="email" required placeholder="Email Address" class="w-full border px-3 py-2 text-sm">
      <input type="tel" name="phone" maxlength="10" required placeholder="Mobile Number" class="w-full border px-3 py-2 text-sm">

      <button type="submit" class="w-full bg-orange-500 text-white py-3 hover:bg-orange-600 transition">
        Submit & Get Details
      </button>
    </form>
  </div>
</div>

<div id="visitModal" class="fixed inset-0 bg-black/60 hidden z-50 flex items-center justify-center">

  <div class="bg-white w-[92%] max-w-md p-6 relative shadow-2xl">

    <button onclick="closeVisitModal()"
      class="absolute top-4 right-4 bg-gray-100 w-8 h-8 flex items-center justify-center">
      <i class="fa-solid fa-xmark"></i>
    </button>

    <h3 class="text-lg font-bold mb-4">Schedule Site Visit</h3>

     <form method="post" action="{% url 'response:additional_info' %}" class="space-y-4">
      {% csrf_token %}

      <input type="hidden" name="type" value="book_visit">

      <input type="text" name="name" placeholder="Full Name"
        class="w-full border px-3 py-2 text-sm" required>

      <input type="email" name="email" required placeholder="Email Address" class="w-full border px-3 py-2 text-sm">

      <input type="tel" name="phone" placeholder="Mobile Number"
        class="phone-input w-full border px-3 py-2 text-sm" required>

      <p class="phone-error text-red-500 text-xs hidden">
        Please enter a valid mobile number
      </p>

      <button class="w-full bg-orange-500 text-white py-3">
        Book Visit
      </button>
    </form>


  </div>
</div>

<!-- ===== GALLERY POPUP ===== -->
<div id="galleryPopup" class="fixed inset-0 bg-black/80 hidden z-[9999] flex items-center justify-center">

  <div class="absolute inset-0" onclick="closeGalleryPopup()"></div>

  <div class="relative w-full max-w-6xl px-4">

    <!-- Close -->
    <button onclick="closeGalleryPopup()" class="absolute -top-12 right-4 w-10 h-10 rounded-full bg-white shadow flex items-center justify-center text-gray-700 hover:bg-orange-500 hover:text-black transition">
      <i class="fa-solid fa-xmark"></i>
    </button>

    <!-- Image Box -->
    <div class="relative rounded-xl overflow-hidden">

      <img id="popupImage" src="" class="w-full max-h-[80vh] object-contain">

      <!-- Counter -->
      <div id="galleryCounter" class="absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/90 text-gray-700 text-xs px-3 py-1 rounded-full shadow"></div>

      <!-- Prev -->
      <button onclick="prevImage()" class="absolute left-3 top-1/2 -translate-y-1/2 w-11 h-11 rounded-full bg-white shadow text-gray-700 flex items-center justify-center hover:bg-orange-500 hover:text-orange transition">
        <i class="fa-solid fa-chevron-left"></i>
      </button>

      <!-- Next -->
      <button onclick="nextImage()" class="absolute right-3 top-1/2 -translate-y-1/2 w-11 h-11 rounded-full bg-white shadow text-gray-700 flex items-center justify-center hover:bg-orange-500 hover:text-orange transition">
        <i class="fa-solid fa-chevron-right"></i>
      </button>

    </div>
  </div>
</div>
<!-- ===== END POPUP ===== -->


<div id="priceModal" class="fixed inset-0 bg-black/60 hidden z-50 flex items-center justify-center">

  <div class="bg-white w-[92%] max-w-md p-6 relative shadow-2xl">

    <button onclick="closePriceModal()"
      class="absolute top-4 right-4 bg-gray-100 w-8 h-8 flex items-center justify-center">
      <i class="fa-solid fa-xmark"></i>
    </button>

    <h3 class="text-lg font-bold mb-4">Get Price Details</h3>

    <form method="post" action="{% url 'response:additional_info' %}" class="space-y-4">
      {% csrf_token %}

      <input type="hidden" name="type" value="get_price">

      <input type="text" name="name" placeholder="Full Name"
        class="w-full border px-3 py-2 text-sm" required>

      <input type="email" name="email" required placeholder="Email Address" class="w-full border px-3 py-2 text-sm">

      <input type="tel" name="phone" placeholder="Mobile Number"
        class="phone-input w-full border px-3 py-2 text-sm" required>

      
      <p class="phone-error text-red-500 text-xs hidden">
        Please enter a valid mobile number
      </p>


      <button class="w-full bg-orange-500 text-white py-3">
          Get Price
      </button>
    </form>


  </div>
</div>

<div id="planModal" class="fixed inset-0 z-[9999] hidden flex items-center justify-center p-4">
  <div class="absolute inset-0 bg-black/80 backdrop-blur-sm transition-opacity" onclick="closeModal()"></div>

  <div class="relative w-full max-w-md bg-white shadow-2xl overflow-hidden animate-zoom-in">
    
    <div class="bg-gray-900 p-6 text-center relative">
      <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-400 hover:text-white transition-colors">
        <i class="fa-solid fa-times text-xl"></i>
      </button>
      <div class="w-14 h-14 bg-orange-600 rounded-full flex items-center justify-center mx-auto mb-3 text-white shadow-lg shadow-orange-600/40">
        <i class="fa-solid fa-unlock-keyhole text-2xl"></i>
      </div>
      <h3 class="text-white text-xl font-bold">Unlock <span id="modalTitle" class="text-orange-500">Floor Plan</span></h3>
      <p class="text-gray-400 text-xs mt-1">Please enter your details to view the unblurred image.</p>
    </div>

    <div class="p-8">
      <form class="space-y-5" method="post" action="{% url 'response:additional_info' %}">
        {% csrf_token %}
        <div>
          <label class="block text-xs font-bold text-gray-700 uppercase mb-1">Name</label>
          <input type="text" name="name" placeholder="Your Name" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 focus:outline-none focus:border-orange-500 focus:ring-1 focus:ring-orange-500 transition-all text-sm">
        </div>
        <div>
          <label class="block text-xs font-bold text-gray-700 uppercase mb-1">Mobile Number</label>
          <input type="tel" name="phone" placeholder="+91 XXXXX XXXXX" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 focus:outline-none focus:border-orange-500 focus:ring-1 focus:ring-orange-500 transition-all text-sm">
        </div>
        <button type="submit" class="w-full bg-orange-600 text-white font-bold py-3 hover:bg-orange-700 shadow-lg shadow-orange-500/30 transition-all transform hover:-translate-y-0.5">
          UNLOCK NOW
        </button>
      </form>
      <p class="text-center text-[10px] text-gray-400 mt-4">We promise not to span you.</p>
    </div>
  </div>
</div>

<script>
window.closeBrochureModal = function () {
  document.getElementById("brochureModal").classList.add("hidden");
};

function scrollAmenities(value){
  document.getElementById('amenitiesScroll').scrollBy({ left:value, behavior:'smooth' });
}
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/18.2.1/js/intlTelInput.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/18.2.1/js/utils.js"></script>

<script>
  document.querySelectorAll(".phone-input").forEach(input => {
    const iti = window.intlTelInput(input, {
      initialCountry: "auto",
      separateDialCode: true,
      utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/18.2.1/js/utils.js",
      geoIpLookup: cb => fetch("https://ipapi.co/json").then(r=>r.json()).then(d=>cb(d.country_code)).catch(()=>cb("IN"))
    });
  });
    document.querySelectorAll('.faq-btn').forEach(button => {
    button.addEventListener('click', () => {
      const item = button.closest('.faq-item');
      const content = item.querySelector('.faq-content');
      const icon = item.querySelector('.faq-icon i');

      // Close all other FAQs
      document.querySelectorAll('.faq-item').forEach(other => {
        if (other !== item) {
          other.querySelector('.faq-content').classList.add('hidden');
          other.querySelector('.faq-icon i').classList.remove('fa-minus');
          other.querySelector('.faq-icon i').classList.add('fa-plus');
        }
      });

      // Toggle current FAQ
      content.classList.toggle('hidden');
      icon.classList.toggle('fa-plus');
      icon.classList.toggle('fa-minus');
    });
  });
</script>

<script>
  function openVisitModal(){
    document.getElementById("visitModal").classList.remove("hidden");
  }
  function closeVisitModal(){
    document.getElementById("visitModal").classList.add("hidden");
  }

  function openPriceModal(){
    document.getElementById("priceModal").classList.remove("hidden");
  }
  function closePriceModal(){
    document.getElementById("priceModal").classList.add("hidden");
  }
</script>

<script>
  const modal = document.getElementById('planModal');
  const modalTitle = document.getElementById('modalTitle');

  function openModal(title) {
    modalTitle.innerText = title; 
    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
  }

  function closeModal() {
    modal.classList.add('hidden');
    document.body.style.overflow = 'auto';
  }
</script>

<script>
function openVirtualVideo() {
  document.getElementById('virtualCover').classList.add('hidden');
  document.getElementById('virtualVideo').classList.remove('hidden');
  document.getElementById('virtualIframe').src =
    "https://www.youtube.com/embed/{{project.youtube_embed_id }}";
}

function closeVirtualVideo() {
  document.getElementById('virtualVideo').classList.add('hidden');
  document.getElementById('virtualCover').classList.remove('hidden');
  document.getElementById('virtualIframe').src = "";
}
</script>



<script>
function openConfigModal(btn){
  // 1. Button se Data nikaalo
  const bhk = btn.getAttribute('data-bhk');
  
  // Debugging: Console check karein agar value na aaye
  console.log("Saving Configuration:", bhk);

  // 2. UI Update (Modal Text)
  document.getElementById("selectedBHK").innerText = bhk;

  // 3. Backend Input Update (Jo Hidden field hai)
  const hiddenInput = document.getElementById("modalConfigInput");
  if(hiddenInput){
      hiddenInput.value = bhk;
  }

  // 4. Modal Open
  document.getElementById("configModal").classList.remove("hidden");
}

function closeConfigModal(){
  document.getElementById("configModal").classList.add("hidden");
}
</script>

<script>
let itiInstances = [];

function initPhoneValidation() {
  itiInstances = [];

  document.querySelectorAll(".phone-input").forEach(input => {

    const iti = window.intlTelInput(input, {
      initialCountry: "auto",
      separateDialCode: true,
      nationalMode: false,
      utilsScript:
        "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/18.2.1/js/utils.js",
      geoIpLookup: cb => {
        fetch("https://ipapi.co/json/")
          .then(res => res.json())
          .then(data => cb(data.country_code))
          .catch(() => cb("IN"));
      }
    });

    itiInstances.push({ input, iti });

    // live validation
    input.addEventListener("input", () => {
      validatePhoneInput(input, iti);
    });
  });
}

function validatePhoneInput(input, iti) {
  const errorEl = input.nextElementSibling;

  if (input.value.trim() === "") {
    errorEl.classList.add("hidden");
    return false;
  }

  if (iti.isValidNumber()) {
    errorEl.classList.add("hidden");
    input.classList.remove("border-red-500");
    return true;
  } else {
    errorEl.classList.remove("hidden");
    input.classList.add("border-red-500");
    return false;
  }
}

/* üî• FORM SUBMIT BLOCK */
document.querySelectorAll("form").forEach(form => {
  form.addEventListener("submit", function (e) {

    let valid = true;

    itiInstances.forEach(obj => {
      if (form.contains(obj.input)) {
        if (!validatePhoneInput(obj.input, obj.iti)) {
          valid = false;
        }
      }
    });

    if (!valid) {
      e.preventDefault(); // ‚ùå stop submit
    }
  });
});

/* init on load */
document.addEventListener("DOMContentLoaded", initPhoneValidation);
</script>

<script>
document.addEventListener("input", function (e) {
  if (e.target.classList.contains("phone-input")) {
    e.target.value = e.target.value.replace(/\D/g, "").slice(0, 10);
  }
});
function scrollAmenities(value) {
  document.getElementById('amenitiesScroll').scrollBy({
    left: value,
    behavior: 'smooth'
  });
}
</script>

<script>
let galleryImages = [];
let currentIndex = 0;

document.addEventListener("DOMContentLoaded", () => {

  // sirf actual gallery images lo
  document.querySelectorAll(
    '#gallerySlider img[data-gallery="true"]'
  ).forEach(img => {
    galleryImages.push(img.src);
  });

  console.log("Gallery Loaded:", galleryImages);
});

function openGalleryPopup(index) {
  if (!galleryImages.length) return;

  currentIndex = index;
  document.getElementById("popupImage").src =
    galleryImages[currentIndex];

  document.getElementById("galleryPopup")
    .classList.remove("hidden");

  document.body.style.overflow = "hidden";
}

function closeGalleryPopup() {
  document.getElementById("galleryPopup")
    .classList.add("hidden");

  document.body.style.overflow = "";
}

function nextImage() {
  currentIndex = (currentIndex + 1) % galleryImages.length;
  document.getElementById("popupImage").src =
    galleryImages[currentIndex];
}

function prevImage() {
  currentIndex =
    (currentIndex - 1 + galleryImages.length) % galleryImages.length;

  document.getElementById("popupImage").src =
    galleryImages[currentIndex];
}

// ESC key close
document.addEventListener("keydown", e => {
  if (e.key === "Escape") closeGalleryPopup();
});
</script>


<footer class="site-footer bg-gray-400 text-gray-300 py-1">
  <div class="footer-container">

    <!-- LEFT -->
    <div class="footer-left">
      ¬© 2026 <strong>{{ settings_obj.copy_right }}</strong>
      <span class="muted">All rights reserved.</span>
    </div>

    <!-- CENTER -->
    <div class="footer-center">
      <a href="{% url 'privacy-policy' %}">Privacy Policy</a>
      <span class="dot">‚Ä¢</span>
      <a href="{% url 'terms_conditions' %}">Terms & Conditions</a>
    </div>

    <!-- RIGHT -->
    <div class="footer-right">
      Created by
      <a href="https://findexors.com" target="_blank" rel="nofollow noopener">
        Findexor
      </a>
    </div>

  </div>
</footer>

<!-- ‚úÖ Fixed Bottom Bar (Mobile Only) -->
<div class="fixed bottom-0 left-0 w-full z-[9999] bg-[#a77b66] md:hidden">
  <div class="grid grid-cols-3">

    <!-- Enquire -->
    <a href="mailto:{{settings_obj.email}}"
      class="flex flex-col items-center justify-center py-3 text-white font-semibold text-[13px]">
      <i class="fa-solid fa-envelope text-[20px] mb-1"></i>
      <span class="leading-none">Enquire</span>
    </a>

    <!-- Whatsapp -->
    <a href="https://wa.me/{{settings_obj.whatsapp}}" target="_blank"
      class="flex flex-col items-center justify-center py-3 text-white font-semibold text-[13px]">
      <i class="fa-brands fa-whatsapp text-[22px] mb-1"></i>
      <span class="leading-none">Whatsapp</span>
    </a>

    <!-- Call Now -->
    <a href="tel:+91{{settings_obj.phone}}"
      class="flex flex-col items-center justify-center py-3 text-white font-semibold text-[13px]">
      <i class="fa-solid fa-phone text-[20px] mb-1"></i>
      <span class="leading-none">Call Now</span>
    </a>

  </div>
</div>

<!-- ‚úÖ So content doesn't hide behind fixed bar -->
<div class="h-[64px] md:hidden"></div>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
